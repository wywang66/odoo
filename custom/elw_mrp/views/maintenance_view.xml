<odoo>

    <!--inherit maintenance request form    -->
    <record id="maintenance_hr_equipment_request_view_form_inherit" model="ir.ui.view">
        <field name="name">maintenance.hr.equipment.request.view.form.inherit</field>
        <field name="model">maintenance.request</field>
        <field name="inherit_id" ref="maintenance.hr_equipment_request_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='equipment_id']" position="before">
                <field name="maintenance_for"/>
                <field name="workcenter_id" invisible="maintenance_for == 'equipment'" required="maintenance_for == 'workcenter'"/>
                <field name="workcenter_equipment_id_domain" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='equipment_id']" position="attributes">
                <attribute name="domain">workcenter_equipment_id_domain</attribute>
                <attribute name="required">maintenance_for == 'equipment'</attribute>
            </xpath>
            <xpath expr="//field[@name='priority']" position="before">
                <label for="block_workcenter" invisible="maintenance_for == 'equipment'"/>
                <div class="d-inline-flex" invisible="maintenance_for == 'equipment'">
                    <field name="block_workcenter" nolabel="1" class="ms-0" style="width: fit-content;"/>
                </div>
<!--                <field name="recurring_leaves_count" invisible="maintenance_for == 'equipment' or not recurring_maintenance or not block_workcenter" groups="base.group_no_one"/>-->
            </xpath>
        </field>
    </record>

    <!--inherit maintenance equipment form    -->
    <record id="maintenance_hr_equipment_view_form_inherit_elw_mrp" model="ir.ui.view">
        <field name="name">maintenance.hr.equipment.view.form.inherit.elw_mrp</field>
        <field name="model">maintenance.equipment</field>
        <field name="inherit_id" ref="maintenance.hr_equipment_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='location']" position="after">
                <field name="workcenter_id" context="{'default_company_id':company_id}" groups="mrp.group_mrp_routings"/>
            </xpath>
            <xpath expr="//div[@name='button_box']" position="inside">
                <button name="button_see_elw_mrp_workcenter" type="object" class="oe_stat_button" icon="fa-cogs" invisible="not workcenter_id" groups="mrp.group_mrp_routings">
                    <div class="o_stat_info">
                        <span class="o_stat_text">Work Center</span>
                    </div>
                </button>
            </xpath>
        </field>
    </record>

    <!--add workcenter in kanban view -->
    <record id="maintenance_hr_equipment_request_view_kanban_inherit" model="ir.ui.view">
        <field name="name">maintenance.hr.equipment.request.view.kanban.inherit</field>
        <field name="model">maintenance.request</field>
        <field name="inherit_id" ref="maintenance.hr_equipment_request_view_kanban"/>
        <field name="arch" type="xml">
            <xpath expr="//span[hasclass('oe_grey')]" position="after">
                <field name="maintenance_for" invisible="1"/>
                <span class="oe_grey" t-if="record.maintenance_for.raw_value == 'workcenter' and record.workcenter_id.raw_value"><field name="workcenter_id"/><br/></span>
            </xpath>
        </field>
    </record>

    <!--add workcenter in search view -->
    <record id="maintenance_hr_equipment_request_view_search_inherit" model="ir.ui.view">
        <field name="name">maintenance.hr.equipment.request.view.search.inherit</field>
        <field name="model">maintenance.request</field>
        <field name="inherit_id" ref="maintenance.hr_equipment_request_view_search"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='stage_id']" position="after">
                <field name="maintenance_for"/>
            </xpath>
            <xpath expr="//filter[@name='high_priority']" position="after">
                <separator/>
                <filter string="Work-Center" name="workcenter" domain="[('maintenance_for', '=', 'workcenter')]"/>
            </xpath>
        </field>
    </record>

    <menuitem id="menu_equipment_machine"
              name="Machines and Tools"
              parent="maintenance.menu_equipment_form"
              action="maintenance.hr_equipment_action"
              groups="base.group_user"
              sequence="2"/>

</odoo>